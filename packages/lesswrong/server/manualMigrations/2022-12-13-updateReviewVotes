import { registerMigration } from './migrationUtils';
import ReviewVotes from '../../lib/collections/reviewVotes/collection';
import { getCostData, REVIEW_YEAR, updateReviewVoteTotals } from '../../lib/reviewUtils';
import groupBy from 'lodash/groupBy';
import { Posts } from '../../lib/collections/posts';
import Users from '../../lib/collections/users/collection';

getCostData

const getCost = (vote) => getCostData({})[vote.qualitativeScore].cost
const getValue = (vote, total) => getCostData({costTotal:total})[vote.qualitativeScore].value

function updatePost(postList, vote, total: number) {
  if (postList[vote.postId] === undefined) { 
    postList[vote.postId] = [getValue(vote, total)]
  } else {
    postList[vote.postId].push(getValue(vote, total))
  }
}


registerMigration({
  name: "updateReviewVotes",
  dateWritten: "2021-12-02",
  idempotent: true,
  action: async () => {
    updateReviewVoteTotals()
 


  }
})